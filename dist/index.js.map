{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["const dragAndDropList = [];\nlet actuallyDragging = \"\";\n\nfunction create(element, options) {\n  if (!element) {\n    throw new Error(\"Element should not be null or undefined\");\n  }\n  if (!options) {\n    options = {};\n  }\n  for (const child of element.children) {\n    child.setAttribute(\"draggable\", \"true\");\n\n    if (options.onDragStart && isFunction(options.onDragStart)) {\n      child.addEventListener(\"dragstart\", event => {\n        const dragStartEvent = new DragStartEvent(event);\n        options.onDragStart(dragStartEvent);\n        if (dragStartEvent.data) {\n          this.data = dragStartEvent.data;\n        }\n        if (dragStartEvent.dragLayout) {\n          dragStartEvent.dragLayout.style.top = \"-1000px\";\n          dragStartEvent.dragLayout.style.left = \"-1000px\";\n          dragStartEvent.dragLayout.style.position = \"absolute\";\n          document.body.append(dragStartEvent.dragLayout);\n          this.dragLayout = dragStartEvent.dragLayout;\n\n          let offsetX = 0;\n          let offsetY = 0;\n\n          switch (dragStartEvent.dragPosition) {\n            case \"middle\":\n              offsetX = dragStartEvent.dragLayout.offsetWidth / 2;\n              offsetY = dragStartEvent.dragLayout.offsetHeight / 2;\n              break;\n            case \"topmiddle\":\n              offsetX = dragStartEvent.dragLayout.offsetWidth / 2;\n              break;\n            case \"topright\":\n              offsetX = dragStartEvent.dragLayout.offsetWidth;\n              break;\n            case \"middleleft\":\n              offsetY = dragStartEvent.dragLayout.offsetHeight / 2;\n              break;\n            case \"middleright\":\n              offsetY = dragStartEvent.dragLayout.offsetHeight / 2;\n              offsetX = dragStartEvent.dragLayout.offsetWidth;\n              break;\n            case \"bottomleft\":\n              offsetY = dragStartEvent.dragLayout.offsetHeight;\n              break;\n            case \"bottommiddle\":\n              offsetY = dragStartEvent.dragLayout.offsetHeight;\n              offsetX = dragStartEvent.dragLayout.offsetWidth / 2;\n              break;\n            case \"bottomright\":\n              offsetY = dragStartEvent.dragLayout.offsetHeight;\n              offsetX = dragStartEvent.dragLayout.offsetWidth;\n              break;\n          }\n\n          event.dataTransfer.setDragImage(dragStartEvent.dragLayout, offsetX, offsetY);\n        }\n\n        const clone = child.cloneNode(true);\n        clone.id = \"n49ndf09n\";\n\n        event.dataTransfer.setData(\"text\", clone.outerHTML);\n        actuallyDragging = clone.outerHTML;\n      });\n    }\n\n    child.addEventListener(\"dragend\", event => {\n      if (options.onDragEnd && isFunction(options.onDragEnd)) {\n        const dragEndEvent = new DragEndEvent(event);\n        if (this.data) {\n          dragEndEvent.data = this.data;\n        }\n        options.onDragEnd(dragEndEvent);\n      }\n      if (this.dragLayout) {\n        this.dragLayout.remove();\n      }\n    });\n\n    child.addEventListener(\"dragover\", event => {\n      event.preventDefault();\n      event.stopPropagation();\n      //console.log(\"DRAGOVER\", event);\n    });\n\n    child.addEventListener(\"dragenter\", event => {\n      const element = document.getElementById(\"n49ndf09n\");\n      if (element != null) {\n        element.remove();\n      }\n      event.target.insertAdjacentHTML(\"beforebegin\", actuallyDragging);\n    });\n\n    child.addEventListener(\"drop\", event => {\n      if (options.onDrop && isFunction(options.onDrop)) {\n        options.onDrop(event);\n      }\n      actuallyDragging = \"\";\n      var data = event.dataTransfer.getData(\"text\");\n      event.target.insertAdjacentHTML(\"beforebegin\", data);\n    });\n  }\n  dragAndDropList.push({\n    options\n  });\n}\n\nclass DragStartEvent {\n  constructor(event) {\n    this.nativeEvent = event;\n    this.dragLayout = null;\n    this.data = null;\n  }\n}\n\nclass DragEndEvent {\n  constructor(event) {\n    this.nativeEvent = event;\n    this.data = null;\n  }\n}\n\nfunction isFunction(functionToCheck) {\n  return functionToCheck && {}.toString.call(functionToCheck) === \"[object Function]\";\n}\n\nexport default {\n  create\n};\n"],"names":[],"mappings":"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"}